"use strict";var LZString=function(){var f=String.fromCharCode;var keyStrBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";var baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++){baseReverseDic[alphabet][alphabet.charAt(i)]=i}}return baseReverseDic[alphabet][character]}var LZString={compressToEncodedURIComponent:function(input){if(input==null)return"";return LZString._compress(input,6,function(a){return keyStrUriSafe.charAt(a)})},decompressFromEncodedURIComponent:function(input){if(input==null)return"";if(input=="")return null;input=input.replace(/ /g,"+");return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrUriSafe,input.charAt(index))})},compress:function(uncompressed){return LZString._compress(uncompressed,16,function(a){return f(a)})},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(uncompressed==null)return"";var i,value,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0,ii;for(ii=0;ii<uncompressed.length;ii+=1){context_c=uncompressed.charAt(ii);if(!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)){context_dictionary[context_c]=context_dictSize++;context_dictionaryToCreate[context_c]=true}context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)){context_w=context_wc}else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c)}}if(context_w!==""){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}}value=2;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value&1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else{context_data_position++}value=value>>1}while(true){context_data_val=context_data_val<<1;if(context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}else context_data_position++}return context_data.join("")},decompress:function(compressed){if(compressed==null)return"";if(compressed=="")return null;return LZString._decompress(compressed.length,32768,function(index){return compressed.charCodeAt(index)})},_decompress:function(length,resetValue,getNextValue){var dictionary=[],next,enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],i,w,bits,resb,maxpower,power,c,data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1){dictionary[i]=i}bits=0;maxpower=Math.pow(2,2);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(next=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 2:return""}dictionary[3]=c;w=c;result.push(c);while(true){if(data.index>length){return""}bits=0;maxpower=Math.pow(2,numBits);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(c=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 2:return result.join("")}if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}if(dictionary[c]){entry=dictionary[c]}else{if(c===dictSize){entry=w+w.charAt(0)}else{return null}}result.push(entry);dictionary[dictSize++]=w+entry.charAt(0);enlargeIn--;w=entry;if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}}}};return LZString}();var Cell=function(){function Cell(z,y,x){this.North=false;this.East=false;this.South=false;this.West=false;this.Up=false;this.Down=false;this.Z=z;this.Y=y;this.X=x}Cell.prototype.get=function(input){};return Cell}();var Character=function(){function Character(name,color,startingLocation,mazeGrid,endLocation){this.endLocation=endLocation;this.North="North";this.East="East";this.South="South";this.West="West";this.Up="Up";this.Down="Down";this.Color=color;this.Name=name;this.CurrentLocation=startingLocation;this.MazeGrid=mazeGrid;this.GridLayers=this.MazeGrid.length;this.GridWidth=this.MazeGrid[0].length;this.GridHeight=this.MazeGrid[0][0].length;this.EndLocation=endLocation;this.CharacterIcon=String.fromCharCode(55357,56832);this.EndIcon=String.fromCharCode(55356,57281);this.move("")}Character.prototype.move=function(direction){$(".y"+this.CurrentLocation.Y+"x"+this.CurrentLocation.X).text("");$(".y"+this.CurrentLocation.Y+"x"+this.CurrentLocation.X).removeClass(this.Name);switch(direction){case this.North:if(this.CurrentLocation.North&&this.CurrentLocation.Y>0)this.CurrentLocation=this.MazeGrid[this.CurrentLocation.Z][this.CurrentLocation.Y-1][this.CurrentLocation.X];break;case this.East:if(this.CurrentLocation.East&&this.CurrentLocation.X<this.GridWidth-1)this.CurrentLocation=this.MazeGrid[this.CurrentLocation.Z][this.CurrentLocation.Y][this.CurrentLocation.X+1];break;case this.South:if(this.CurrentLocation.South&&this.CurrentLocation.Y<this.GridHeight-1)this.CurrentLocation=this.MazeGrid[this.CurrentLocation.Z][this.CurrentLocation.Y+1][this.CurrentLocation.X];break;case this.West:if(this.CurrentLocation.West&&this.CurrentLocation.X>0)this.CurrentLocation=this.MazeGrid[this.CurrentLocation.Z][this.CurrentLocation.Y][this.CurrentLocation.X-1];break;case this.Up:if(this.CurrentLocation.Z===this.GridLayers-1)this.CurrentLocation=this.MazeGrid[0][this.CurrentLocation.Y][this.CurrentLocation.X];else this.CurrentLocation=this.MazeGrid[this.CurrentLocation.Z+1][this.CurrentLocation.Y][this.CurrentLocation.X];break;case this.Down:if(this.CurrentLocation.Z===0)this.CurrentLocation=this.MazeGrid[this.GridLayers-1][this.CurrentLocation.Y][this.CurrentLocation.X];else this.CurrentLocation=this.MazeGrid[this.CurrentLocation.Z-1][this.CurrentLocation.Y][this.CurrentLocation.X];break;default:break}if(this.MazeGrid[this.CurrentLocation.Z][this.CurrentLocation.Y][this.CurrentLocation.X]===this.MazeGrid[this.EndLocation.Z][this.EndLocation.Y][this.EndLocation.X]){this.CharacterIcon=String.fromCharCode(55357,56846);this.EndIcon=String.fromCharCode(55356,57225);$(".y"+this.CurrentLocation.Y+"x"+this.CurrentLocation.X).addClass("game-won");$("#play-again").show()}$(".winter.y"+this.EndLocation.Y+"x"+this.EndLocation.X).text(this.EndIcon);$(".y"+this.CurrentLocation.Y+"x"+this.CurrentLocation.X).text(this.CharacterIcon);$(".y"+this.CurrentLocation.Y+"x"+this.CurrentLocation.X).addClass(this.Name)};return Character}();var Maze=function(){function Maze(gridLayers,gridWidth,gridHeight,mazePathCompressed){this.gridLayers=gridLayers;this.gridWidth=gridWidth;this.gridHeight=gridHeight;this.mazePathCompressed=mazePathCompressed;this.North="N";this.East="E";this.South="S";this.West="W";this.Up="U";this.Down="D";this.Directions=[this.North,this.South,this.West,this.East,this.Up,this.Down];this.Back="B";this.GridLayers=gridLayers;this.GridWidth=gridWidth;this.GridHeight=gridHeight;this.MazeGrid=this.generateGrid();this.CellsList=[new Cell(0,0,0)];if(mazePathCompressed!==undefined&&typeof mazePathCompressed!==undefined&&mazePathCompressed!==""){this.fillMazeProcedural();this.MazePathCompressed=mazePathCompressed;var uncompressed=LZString.decompressFromEncodedURIComponent(mazePathCompressed);if(uncompressed!==undefined&&uncompressed!==null){this.MazePath=uncompressed}else{this.MazePath=""}}else{this.MazePath="";this.fillMazeRandom();this.EndLocation={Z:0,Y:this.getRandomIntInclusive(1,this.gridHeight-1),X:this.getRandomIntInclusive(1,this.gridWidth-1)};this.MazePath+="|"+JSON.stringify(this.EndLocation);this.MazePathCompressed=LZString.compressToEncodedURIComponent(this.MazePath)}}Maze.prototype.fillMazeProcedural=function(){};Maze.prototype.encodeMaze=function(direction){this.MazePath+=direction};Maze.prototype.groupBy=function(objectArray,property){return objectArray.reduce(function(acc,obj){var key=obj[property];if(!acc[key]){acc[key]=[]}acc[key].push(obj);return acc},{})};Maze.prototype.fillMazeRandom=function(){var index=-1;while(this.CellsList.length>0){index=this.CellsList.length-1;var currentCell=this.CellsList[index];var directions=this.getRandomDirections();for(var i=0;i<directions.length;i++){var nextCell=this.directionModifier(this.CellsList[index],directions[i]);if(this.isEmptyCell(nextCell.Z,nextCell.Y,nextCell.X)){var result=this.carvePathBetweenCells(currentCell,nextCell,directions[i]);this.MazeGrid[currentCell.Z][currentCell.Y][currentCell.X]=result.current;this.MazeGrid[nextCell.Z][nextCell.Y][nextCell.X]=result.next;this.CellsList.push(nextCell);this.encodeMaze(directions[i]);index=-1;break}}if(index!==-1){this.CellsList.splice(index,1);this.encodeMaze(this.Back)}}};Maze.prototype.generateGrid=function(){var tempGrid=new Array(this.GridLayers);for(var i=0;i<this.GridLayers;i++){tempGrid[i]=new Array(this.GridHeight);for(var j=0;j<this.GridHeight;j++){tempGrid[i][j]=new Array(this.GridWidth);tempGrid[i][j].fill()}}return tempGrid};Maze.prototype.carvePathBetweenCells=function(currentCell,nextCell,direction){switch(direction){case this.North:currentCell.North=true;nextCell.South=true;break;case this.East:currentCell.East=true;nextCell.West=true;break;case this.South:currentCell.South=true;nextCell.North=true;break;case this.West:currentCell.West=true;nextCell.East=true;break;case this.Up:currentCell.Up=true;nextCell.Down=true;break;case this.Down:currentCell.Down=true;nextCell.Up=true;break}return{current:currentCell,next:nextCell}};Maze.prototype.getRandomIntInclusive=function(min,max){min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min+1))+min};Maze.prototype.getRandomDirections=function(){return this.shuffle(this.Directions)};Maze.prototype.shuffle=function(array){var j;var x;var i;for(i=array.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1));x=array[i];array[i]=array[j];array[j]=x}return array};Maze.prototype.isEmptyCell=function(z,y,x){if(z>=0&&z<this.GridLayers&&y>=0&&y<this.GridHeight&&x>=0&&x<this.GridWidth&&(this.MazeGrid[z][y][x]===null||this.MazeGrid[z][y][x]===undefined))return true;return false};Maze.prototype.directionModifier=function(cell,direction){switch(direction){case this.North:return new Cell(cell.Z,cell.Y-1,cell.X);case this.East:return new Cell(cell.Z,cell.Y,cell.X+1);case this.South:return new Cell(cell.Z,cell.Y+1,cell.X);case this.West:return new Cell(cell.Z,cell.Y,cell.X-1);case this.Up:if(cell.Z===this.gridLayers-1)return new Cell(0,cell.Y,cell.X);else return new Cell(cell.Z+1,cell.Y,cell.X);case this.Down:if(cell.Z===0)return new Cell(this.GridLayers-1,cell.Y,cell.X);else return new Cell(cell.Z-1,cell.Y,cell.X)}return new Cell(cell.Z,cell.Y,cell.Z)};return Maze}();var MazeView=function(){function MazeView(mazegrid,endCell){this.mazegrid=mazegrid;this.endCell=endCell;this.MazeGrid=mazegrid;this.GridWidth=mazegrid[0][0].length;this.EndCell=endCell}MazeView.prototype.displayMaze=function(){$("#play-again").hide();var html="";for(var layer=0;layer<this.MazeGrid.length;layer++){var layerName=this.getNameFromLayer(layer);html+='<div id="layer'+layer+'" class="'+layerName+'">';html+='<h3 class="'+layerName+' maze-header">'+'<button onclick="goDown()" class="down-button" aria-label="Move Back">&nbsp;</button>'+('<span class="'+layerName+' layer-name">'+layerName+"</span>")+'<button onclick="goUp()" class="up-button" aria-label="Move Forward">&nbsp;</button>'+"</h3>";html+='<table id="layer'+layer+'-table" class="maze-table '+layerName+'">';for(var row=0;row<this.MazeGrid[layer].length;row++){html+="<tr class='r'>";for(var column=0;column<this.GridWidth;column++){var classes=this.getClassesFromCell(this.MazeGrid[layer][row][column]);html+='<td class="cell '+classes+" "+layerName+" y"+row+"x"+column+'">&nbsp;';html+="</td>"}html+="</tr> \x3c!-- end row --\x3e\n"}html+="</table>";html+="</div>"}$("#maze-game").html(html)};MazeView.prototype.getClassesFromCell=function(cell){var classes="";if(!cell.North)classes+=" top ";if(!cell.East)classes+=" right ";if(!cell.South)classes+=" bottom ";if(!cell.West)classes+=" left ";if(!cell.Up)classes+=" up ";if(!cell.Down)classes+=" down ";if(this.MazeGrid[cell.Z][cell.Y][cell.X]===this.EndCell)classes+=" end ";return classes};MazeView.prototype.getNameFromLayer=function(layer){switch(layer){case 0:return"winter";case 1:return"spring";case 2:return"summer";case 3:return"fall";default:return""}};return MazeView}();var currentLayer;var GridLayers;var GridHeight;var GridWidth;var MyCharacter;function main(){currentLayer=0;GridLayers=4;GridHeight=8;GridWidth=8;var myMaze=new Maze(GridLayers,GridHeight,GridWidth);var mazeViewer=new MazeView(myMaze.MazeGrid,myMaze.EndLocation);mazeViewer.displayMaze();console.log(myMaze.MazePath);console.log(myMaze.MazePathCompressed);showLayerHideOthers(currentLayer);MyCharacter=new Character("happyemoji","happy",myMaze.MazeGrid[0][0][0],myMaze.MazeGrid,myMaze.EndLocation)}https:document.addEventListener("keydown",function(e){e=e||window.event;switch(e.which||e.keyCode){case 65:case 37:goWest();break;case 87:case 38:goNorth();break;case 68:case 39:goEast();break;case 83:case 40:goSouth();break;case 81:goDown();break;case 69:goUp();break;case 72:showHelp();break;default:return}e.preventDefault()});function showHelp(){}function showLayerHideOthers(layerChoice){if(GridLayers>1){for(var layer=0;layer<GridLayers;layer++){var layerId="#layer"+layer;if(layer===layerChoice)$(layerId).show();else $(layerId).hide()}}}function goNorth(){MyCharacter.move(MyCharacter.North)}function goEast(){MyCharacter.move(MyCharacter.East)}function goSouth(){MyCharacter.move(MyCharacter.South)}function goWest(){MyCharacter.move(MyCharacter.West)}function goUp(){if(currentLayer<GridLayers-1)currentLayer++;else currentLayer=0;showLayerHideOthers(currentLayer);MyCharacter.move(MyCharacter.Up)}function goDown(){if(currentLayer===0)currentLayer=GridLayers-1;else currentLayer--;showLayerHideOthers(currentLayer);MyCharacter.move(MyCharacter.Down)}